<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è¯­æ³•å¼€å‘ | OpenEX</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/OpenEXDoc/logo.png">
    <meta name="description" content="OpenEX é¢å‘è¿‡ç¨‹è„šæœ¬è¯­è¨€">
    
    <link rel="preload" href="/OpenEXDoc/assets/css/0.styles.aeecdd65.css" as="style"><link rel="preload" href="/OpenEXDoc/assets/js/app.0b078796.js" as="script"><link rel="preload" href="/OpenEXDoc/assets/js/2.4c546f0b.js" as="script"><link rel="preload" href="/OpenEXDoc/assets/js/1.80356216.js" as="script"><link rel="preload" href="/OpenEXDoc/assets/js/30.ee69313e.js" as="script"><link rel="prefetch" href="/OpenEXDoc/assets/js/10.c3b7a0fc.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/11.732cf3e0.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/12.895b5595.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/13.9426da25.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/14.856c1518.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/15.758ee11b.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/16.e925b239.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/17.5b873df7.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/18.4c170722.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/19.a45744ea.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/20.c22d9498.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/21.a45f0526.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/22.431e66aa.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/23.4ee790cc.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/24.48c05d5f.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/25.db006da9.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/26.7255540f.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/27.8721e18f.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/28.10b09354.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/29.99e4ca5f.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/3.4db2e19a.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/31.7fa9f044.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/32.8617a51e.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/33.bdb5976a.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/34.4e6625fc.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/35.f45697af.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/36.ea3c2746.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/37.b9f3bf39.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/38.b48b1fff.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/4.45665f8a.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/5.b31b942f.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/6.4910e764.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/7.c5640ac7.js"><link rel="prefetch" href="/OpenEXDoc/assets/js/vendors~docsearch.77260563.js">
    <link rel="stylesheet" href="/OpenEXDoc/assets/css/0.styles.aeecdd65.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/OpenEXDoc/zh/" class="home-link router-link-active"><img src="/OpenEXDoc/icon.png" alt="OpenEX" class="logo"> <span class="site-name can-hide">OpenEX</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/OpenEXDoc/" class="nav-link router-link-active">
  ğŸ¡é¦–é¡µ
</a></div><div class="nav-item"><a href="/OpenEXDoc/zh/api.html" class="nav-link">
  ğŸ“–Runtime API
</a></div><div class="nav-item"><a href="/OpenEXDoc/zh/issues.html" class="nav-link">
  ğŸ²é—®é¢˜è§£å†³
</a></div><div class="nav-item"><a href="/OpenEXDoc/zh/help/" class="nav-link">
  ğŸš€è¯­æ³•
</a></div><div class="nav-item"><a href="/OpenEXDoc/zh/start.html" class="nav-link">
  âš¡å¿«é€Ÿä¸Šæ‰‹
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/OpenEXDoc/en/" class="nav-link">
  en-US
</a></li><li class="dropdown-item"><!----> <a href="/OpenEXDoc/zh/extend/parser.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  zh-CN
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/OpenEXDoc/" class="nav-link router-link-active">
  ğŸ¡é¦–é¡µ
</a></div><div class="nav-item"><a href="/OpenEXDoc/zh/api.html" class="nav-link">
  ğŸ“–Runtime API
</a></div><div class="nav-item"><a href="/OpenEXDoc/zh/issues.html" class="nav-link">
  ğŸ²é—®é¢˜è§£å†³
</a></div><div class="nav-item"><a href="/OpenEXDoc/zh/help/" class="nav-link">
  ğŸš€è¯­æ³•
</a></div><div class="nav-item"><a href="/OpenEXDoc/zh/start.html" class="nav-link">
  âš¡å¿«é€Ÿä¸Šæ‰‹
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/OpenEXDoc/en/" class="nav-link">
  en-US
</a></li><li class="dropdown-item"><!----> <a href="/OpenEXDoc/zh/extend/parser.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  zh-CN
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å¼€å§‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åŸºç¡€æ•™ç¨‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>æ‰©å±•å¼€å‘</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenEXDoc/zh/extend/" aria-current="page" class="sidebar-link">åŸºç¡€å¼€å‘</a></li><li><a href="/OpenEXDoc/zh/extend/struct.html" class="sidebar-link">é¡¹ç›®ç»“æ„</a></li><li><a href="/OpenEXDoc/zh/extend/parser.html" aria-current="page" class="active sidebar-link">è¯­æ³•å¼€å‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/OpenEXDoc/zh/extend/parser.html#è¯­å¥åˆ†å‰²" class="sidebar-link">è¯­å¥åˆ†å‰²</a></li><li class="sidebar-sub-header"><a href="/OpenEXDoc/zh/extend/parser.html#æ–‡æ¡£ç¼–å†™ä¸­" class="sidebar-link">æ–‡æ¡£ç¼–å†™ä¸­</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="è¯­æ³•å¼€å‘"><a href="#è¯­æ³•å¼€å‘" class="header-anchor">#</a> è¯­æ³•å¼€å‘</h1> <p>æœ¬æ–‡æ¡£ä¸»è¦ä»‹ç»äº†å¦‚ä½•åŸºäºOpenEXåˆ›å»ºæ–°çš„è¯­æ³•ç»“æ„</p> <div class="custom-block tip"><p class="custom-block-title">æç¤º</p> <p>OpenEXçš„è¯­æ³•è§£æä¸ºæœ‰é™è‡ªåŠ¨æœºæ¶æ„,æ¯æ¬¡æµç¨‹å°†è§£æå‡ºä¸€æ¡è¯­å¥</p></div> <hr> <p>åœ¨<code>OpenEX</code>ä¸­,ä¸€æ¡è¯­å¥çš„å¤´éƒ¨å¿…é¡»ä¸ºå…³é”®å­—,å¦‚æœä¸ºæ ‡è¯†ç¬¦,OpenEXåˆ™ä¼šè‡ªåŠ¨åˆ¤æ–­è¯¥æ¡å­—æ®µä¸ºè¡¨è¾¾å¼å¹¶é€å…¥<code>ExpressionParser</code>è¿›è¡Œè¿›ä¸€æ­¥è§£æ</p> <p>ä»¥ä¸‹ä¾‹å­ä¸­,æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <strong>å®šä¹‰ifè¯­å¥</strong> çš„åˆ†æå™¨</p> <h2 id="è¯­å¥åˆ†å‰²"><a href="#è¯­å¥åˆ†å‰²" class="header-anchor">#</a> è¯­å¥åˆ†å‰²</h2> <p>åœ¨ä»€ä¹ˆç±»å‹çš„<code>Parser</code>ä¸­åˆ›å»ºå¯¹æ‚¨çš„è¯­å¥ç›¸å…³çš„è§£ææµç¨‹,ä»£è¡¨æ‚¨çš„è¯­å¥å¯ä»¥è¢«å®šä¹‰åœ¨ä»€ä¹ˆä½ç½®</p> <h3 id="è„šæœ¬æ ¹"><a href="#è„šæœ¬æ ¹" class="header-anchor">#</a> è„šæœ¬æ ¹</h3> <p>æ‚¨éœ€è¦åœ¨<code>io.github.mczzcs.compiler.parser.Parser</code>ç±»ä¸­<code>getParser</code>æ–¹æ³•çš„<code>switch</code>è¯­å¥ä¸­åˆ›å»º<code>case &quot;if&quot; -&gt; {}</code>ä¸€æ¡åˆ¤æ–­åˆ†æ”¯,å¦åˆ™OpenEXå°†ç›´æ¥æŠ›å‡ºç¼–è¯‘å‹å¼‚å¸¸: <code>ä¸æ˜¯è¯­å¥</code></p> <p>ç„¶åæ ¹æ®æ‚¨çš„è¯­å¥ç»“æ„,è§„å®šè§£ææµç¨‹</p> <ul><li>ifè¯­å¥çš„ç»“æ„ä¸º<code>if ( å¸ƒå°”è¡¨è¾¾å¼ ) { ä»£ç å— }</code></li></ul> <p>æ­¤æ—¶æˆ‘ä»¬æ–°å»ºä¸€ä¸ªå¯¹è±¡<code>Token t = getToken();</code>ç”¨äºè·å–ä¸‹ä¸€ä¸ªè¯ç´ <br>
æŒ‰ç…§æˆ‘ä»¬çš„è¯­æ³•ç»“æ„, &quot;ä¸å‡ºæ„å¤–&quot; çš„è¯è·å–åˆ°çš„ <code>t</code> åº”è¯¥æ˜¯å·¦æ‹¬å· <code>(</code><br>
æ‰€ä»¥ä¸ºäº†é˜²æ­¢æ„å¤–å‘ç”Ÿ,æˆ‘ä»¬åº”è¯¥åŠ ä¸Šä¸€æ¡ifè¯­å¥å»åˆ¤æ–­</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">LP</span> 
    <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">CompileException</span><span class="token punctuation">(</span><span class="token string">&quot;'(' expected.&quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> filename<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¦‚æœä¸ä¸º '(' åˆ™æŠ›å‡ºç¼–è¯‘å‹å¼‚å¸¸             </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>å·¦æ‹¬å·å¯¹åº”çš„è¯ç´ ç±»å‹ä¸º<code>LP</code>,å¯¹åº”idæ˜¯7</p></blockquote> <div class="custom-block warning"><p class="custom-block-title">æ³¨æ„</p> <p>å› ä¸ºOpenEXè¯æ³•åˆ†ææœºåˆ¶,&quot;å€¼&quot;ä¹Ÿè¢«ç®—ä½œä¸€ä¸ªè¯ç´ ,æ‰€ä»¥è¯¸å¦‚<code>&quot;(&quot;</code>è¿™æ ·çš„å­—ç¬¦ä¸²ä¹Ÿè¢«çœ‹åšä¸€ä¸ªå€¼,å•çº¯çš„é€šè¿‡<code>getData</code>æ–¹æ³•è·å–è¯ç´ çš„æ•°æ®ä¼šå‘ç”Ÿè¯­æ³•çš„é”™è¯¯åˆ¤æ–­,æ‰€ä»¥OpenEXè¯æ³•åˆ†æå™¨ç»™æ¯ä¸ªè¯ç´ éƒ½æ‰“ä¸Šäº†å…¶å¯¹åº”çš„ç±»å‹,é˜²æ­¢æ­¤ç±»äº‹æƒ…å‘ç”Ÿ</p></div> <p>ç„¶åæˆ‘ä»¬å¯ä»¥æ ¹æ®æ‹¬å·ç»„åˆè·å–è¡¨è¾¾å¼çš„æ•´ä½“å­—æ®µ</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Token</span><span class="token punctuation">&gt;</span></span> vars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">do</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">LP</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        vars<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
        index <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">LR</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        index <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        vars<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">LR</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>

    vars<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    t <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>è¿™ä¸ªæ—¶å€™,åˆ—è¡¨<code>vars</code>å­˜å‚¨çš„å°±æ˜¯è¡¨è¾¾å¼çš„æ•´ä½“å­—æ®µäº†,ç„¶åæˆ‘ä»¬ä¸¢å…¥<code>ExpressionParser</code>ç±»å¯¹è¡¨è¾¾å¼è¿›è¡Œè§£æ</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ExpressionParsing</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExpressionParsing</span><span class="token punctuation">(</span>vars<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å…¶ä¸­,å› ä¸ºæˆ‘ä»¬æ˜¯ç›´æ¥åœ¨Parserç±»ä¸­ç¼–å†™,æ‰€ä»¥æ„é€ å‡½æ•°ç¬¬äºŒä¸ªå½¢å‚å¡«å†™'this'å³å¯</span>
<span class="token comment">// 'c' æˆå‘˜å®ä¾‹å¯¹è±¡ä»£è¡¨ä¸€ä¸ª`Compiler` OpenEXæ ‡å‡†ç¼–è¯‘å™¨</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç„¶åæˆ‘ä»¬è¯¥è§£æç”±<code>{}</code>å¤§æ‹¬å·æ‹¬èµ·æ¥çš„ä»£ç å—äº†<br>
æˆ‘ä»¬å†æ¬¡è°ƒç”¨<code>getToken()</code>è·å–ä¸€æ¬¡è¯ç´ ,å¹¶åˆ¤æ–­æ˜¯å¦ä¸º <code>{</code> å·¦æ‹¬å·</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>t <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">LP</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;{&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">CompileException</span><span class="token punctuation">(</span><span class="token string">&quot;Missing statement body.&quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> <span class="token function">getFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ¥ç€æˆ‘ä»¬åˆ†å‰²å‡ºä»£ç å—çš„å†…å®¹</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Tokens</span><span class="token punctuation">&gt;</span></span> groups <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">do</span> <span class="token punctuation">{</span>
    t <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">LP</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;{&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">LR</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> i <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    groups<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ­¤æ—¶å¾—åˆ°çš„<code>groups</code>å°±æ˜¯ä»£ç å—ä¸­çš„æ‰€æœ‰è¯ç´ äº†,ç„¶åæˆ‘ä»¬ä¸¢å…¥<code>SubParser</code>ç±»ä¸­è§£æè¯­å¥å—çš„å†…å®¹å³å¯</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">SubParser</span> sp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubParser</span><span class="token punctuation">(</span>groups<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//åˆå§‹åŒ–ä¸€ä¸ªå­è§£æå™¨,å…¶ä¸­ä¼ å…¥çš„groupsä»£è¡¨æˆ‘ä»¬åˆ†å‰²å¥½çš„è¯­å¥å—</span>
<span class="token comment">// this ä¸ºParserç±»</span>
<span class="token comment">// c ä¸º Compilerç±»</span>
<span class="token comment">// ç¬¬ä¸€ä¸ªfalseä¸ºåˆ¤æ–­æ˜¯å¦æ˜¯åœ¨functionè¯­å¥å—å†…,ä½†æ˜¯æˆ‘ä»¬æ˜¯åœ¨è„šæœ¬æ ¹è§£æ,æ‰€ä»¥å¡«ä¸Šfalse</span>
<span class="token comment">// ç¬¬äºŒä¸ªfalseä¸ºåˆ¤æ–­æ˜¯å¦æ˜¯åœ¨whileè¯­å¥å—å†…</span>
<span class="token comment">// ç¬¬ä¸‰ä¸ªnullåªæœ‰åœ¨functionè¯­å¥å—å†…æ‰èƒ½è·å–åˆ°,æˆ‘ä»¬å› ä¸ºæ˜¯åœ¨è„šæ­¥æ ¹,ç›´æ¥å¡«nullå³å¯</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>è‡³æ­¤,æˆ‘ä»¬çš„ifè¯­å¥å‰ç«¯è¯­å¥åˆ†å‰²éƒ¨åˆ†å°±å®Œæˆäº†<br>
ç„¶åæˆ‘ä»¬åœ¨ParseråŒçº§åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªå«<code>IfParser</code>çš„ç±»,ä»£è¡¨æˆ‘ä»¬çš„ifè¯­å¥çš„è¯­æ³•/è¯­ä¹‰æ··åˆè§£æå™¨</p> <p>é¦–å…ˆæˆ‘ä»¬ç»§æ‰¿<code>BaseParser</code>æ¥å£,å¹¶å®ç°å…¶ä¸­çš„æ–¹æ³•</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>mczzcs<span class="token punctuation">.</span>compile<span class="token punctuation">.</span>parser</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>mczzcs<span class="token punctuation">.</span>compile<span class="token punctuation">.</span></span><span class="token class-name">Compiler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>mczzcs<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">CompileException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>mczzcs<span class="token punctuation">.</span>exe<span class="token punctuation">.</span>code<span class="token punctuation">.</span></span><span class="token class-name">ASTNode</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>mczzcs<span class="token punctuation">.</span>exe<span class="token punctuation">.</span>code<span class="token punctuation">.</span>struct<span class="token punctuation">.</span>decide<span class="token punctuation">.</span></span><span class="token class-name">IfNode</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IfParser</span> <span class="token keyword">implements</span> <span class="token class-name">BaseParser</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ASTNode</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token class-name">Parser</span> parser<span class="token punctuation">,</span> <span class="token class-name">Compiler</span> compiler<span class="token punctuation">,</span><span class="token class-name">FunctionParser</span> functionParser<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CompileException</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ç„¶åæˆ‘ä»¬ä½¿å…¶èƒ½æ¥å—<code>Parser</code>ä¼ æ¥çš„å‚æ•°,æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ„é€ æ–¹æ³•å’Œä¸€äº›æˆå‘˜å¯¹è±¡</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ASTNode</span><span class="token punctuation">&gt;</span></span> bool<span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BaseParser</span><span class="token punctuation">&gt;</span></span> group<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token class-name">IfParser</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ASTNode</span><span class="token punctuation">&gt;</span></span> bool<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BaseParser</span><span class="token punctuation">&gt;</span></span> group<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bool <span class="token operator">=</span> bool<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>group <span class="token operator">=</span> group<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ç„¶åæˆ‘ä»¬åœ¨å®ç°<code>BaseParser</code>çš„æ–¹æ³•å†…è¯¦ç»†ç¼–å†™æ··åˆè§£æå™¨éœ€è¦åšçš„äº‹,è¯ä¸å¤šè¯´ç›´æ¥ä¸Šä»£ç </p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ASTNode</span><span class="token punctuation">&gt;</span></span> groups <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">BaseParser</span> bp<span class="token operator">:</span>group<span class="token punctuation">)</span><span class="token punctuation">{</span>
    groups<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>bp<span class="token punctuation">.</span><span class="token function">eval</span><span class="token punctuation">(</span>parser<span class="token punctuation">,</span> compiler<span class="token punctuation">,</span>functionParser<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">IfNode</span><span class="token punctuation">(</span>bool<span class="token punctuation">,</span>groups<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æœ€é‡è¦çš„ä¸€ç‚¹,ä½ éœ€è¦åœ¨evalæ–¹æ³•ä¸­è¿”å›ç»§æ‰¿äº<code>ASTNode</code>æ¥å£çš„æ‰§è¡ŒèŠ‚ç‚¹,æ¯ä¸ªæ‰§è¡ŒèŠ‚ç‚¹å®ç°å…¶ä¸­çš„<code>executor</code>æ–¹æ³•</p> <blockquote><p>æ‰§è¡ŒèŠ‚ç‚¹çš„åŠŸèƒ½å¹¶ä¸æ˜¯ç”±æ‰§è¡Œå¼•æ“å®ç°çš„,è€Œæ˜¯æ¯ä¸ªæ‰§è¡ŒèŠ‚ç‚¹ç±»å»å®ç°çš„,æ‰§è¡Œå¼•æ“åªæ˜¯è°ƒç”¨è¯¥æ–¹æ³•å¹¶æ‰§è¡Œ</p></blockquote> <hr> <h2 id="æ–‡æ¡£ç¼–å†™ä¸­"><a href="#æ–‡æ¡£ç¼–å†™ä¸­" class="header-anchor">#</a> æ–‡æ¡£ç¼–å†™ä¸­</h2> <p>è¯¦ç»†çš„å®ç°å‚è€ƒæºç  <code>io.github.mczzcs.exe.code.struct.IfNode</code>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/OpenEXDoc/zh/extend/struct.html" class="prev">
        é¡¹ç›®ç»“æ„
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/OpenEXDoc/assets/js/app.0b078796.js" defer></script><script src="/OpenEXDoc/assets/js/2.4c546f0b.js" defer></script><script src="/OpenEXDoc/assets/js/1.80356216.js" defer></script><script src="/OpenEXDoc/assets/js/30.ee69313e.js" defer></script>
  </body>
</html>
